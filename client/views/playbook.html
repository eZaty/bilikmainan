<template name="playbook">
	<link rel="stylesheet" type="text/css" href="/styles/playbook.css" />
	<div id="logo">
		<a href="/"><img src="/images/webe-playroom-beta.png"></a>
	</div>

	<div id="tf_loading" class="tf_loading"></div>
	<div id="tf_bg" class="tf_bg">
		<img src="/images/playbook/Brand Book 1.jpg" alt="Image 1" longdesc="/images/playbook/thumbs/Brand Book 1.jpg" />
		<img src="/images/playbook/Brand Book 2.jpg" alt="Image 2" longdesc="/images/playbook/thumbs/Brand Book 2.jpg"/>
		<img src="/images/playbook/Brand Book 3.jpg" alt="Image 3" longdesc="/images/playbook/thumbs/Brand Book 3.jpg"/>
		<img src="/images/playbook/Brand Book 4.jpg" alt="Image 4" longdesc="/images/playbook/thumbs/Brand Book 4.jpg"/>
		<img src="/images/playbook/Brand Book 5.jpg" alt="Image 5" longdesc="/images/playbook/thumbs/Brand Book 5.jpg"/>
		<img src="/images/playbook/Brand Book 6.jpg" alt="Image 6" longdesc="/images/playbook/thumbs/Brand Book 6.jpg"/>
		<img src="/images/playbook/Brand Book 7.jpg" alt="Image 7" longdesc="/images/playbook/thumbs/Brand Book 7.jpg" />
		<img src="/images/playbook/Brand Book 8.jpg" alt="Image 8" longdesc="/images/playbook/thumbs/Brand Book 8.jpg"/>
		<img src="/images/playbook/Brand Book 9.jpg" alt="Image 9" longdesc="/images/playbook/thumbs/Brand Book 9.jpg"/>
		<img src="/images/playbook/Brand Book 10.jpg" alt="Image 10" longdesc="/images/playbook/thumbs/Brand Book 10.jpg"/>
		<img src="/images/playbook/Brand Book 11.jpg" alt="Image 11" longdesc="/images/playbook/thumbs/Brand Book 11.jpg"/>
		<img src="/images/playbook/Brand Book 12.jpg" alt="Image 12" longdesc="/images/playbook/thumbs/Brand Book 12.jpg"/>
		<img src="/images/playbook/Brand Book 13.jpg" alt="Image 13" longdesc="/images/playbook/thumbs/Brand Book 13.jpg" />
		<img src="/images/playbook/Brand Book 14.jpg" alt="Image 14" longdesc="/images/playbook/thumbs/Brand Book 14.jpg"/>
		<img src="/images/playbook/Brand Book 15.jpg" alt="Image 15" longdesc="/images/playbook/thumbs/Brand Book 15.jpg"/>
		<img src="/images/playbook/Brand Book 16.jpg" alt="Image 16" longdesc="/images/playbook/thumbs/Brand Book 16.jpg"/>
		<img src="/images/playbook/Brand Book 17.jpg" alt="Image 17" longdesc="/images/playbook/thumbs/Brand Book 17.jpg"/>
		<img src="/images/playbook/Brand Book 18.jpg" alt="Image 18" longdesc="/images/playbook/thumbs/Brand Book 18.jpg"/>
		<img src="/images/playbook/Brand Book 19.jpg" alt="Image 19" longdesc="/images/playbook/thumbs/Brand Book 19.jpg" />
		<img src="/images/playbook/Brand Book 20.jpg" alt="Image 20" longdesc="/images/playbook/thumbs/Brand Book 20.jpg"/>
		<img src="/images/playbook/Brand Book 21.jpg" alt="Image 21" longdesc="/images/playbook/thumbs/Brand Book 21.jpg"/>
		<img src="/images/playbook/Brand Book 22.jpg" alt="Image 22" longdesc="/images/playbook/thumbs/Brand Book 22.jpg"/>
		<img src="/images/playbook/Brand Book 23.jpg" alt="Image 23" longdesc="/images/playbook/thumbs/Brand Book 23.jpg"/>
		<img src="/images/playbook/Brand Book 24.jpg" alt="Image 24" longdesc="/images/playbook/thumbs/Brand Book 24.jpg"/>
		<img src="/images/playbook/Brand Book 25.jpg" alt="Image 25" longdesc="/images/playbook/thumbs/Brand Book 25.jpg" />
		<img src="/images/playbook/Brand Book 26.jpg" alt="Image 26" longdesc="/images/playbook/thumbs/Brand Book 26.jpg"/>
		<img src="/images/playbook/Brand Book 27.jpg" alt="Image 27" longdesc="/images/playbook/thumbs/Brand Book 27.jpg"/>
		<img src="/images/playbook/Brand Book 28.jpg" alt="Image 28" longdesc="/images/playbook/thumbs/Brand Book 28.jpg"/>
		<img src="/images/playbook/Brand Book 29.jpg" alt="Image 29" longdesc="/images/playbook/thumbs/Brand Book 29.jpg"/>
		<img src="/images/playbook/Brand Book 30.jpg" alt="Image 30" longdesc="/images/playbook/thumbs/Brand Book 30.jpg"/>
		<img src="/images/playbook/Brand Book 31.jpg" alt="Image 31" longdesc="/images/playbook/thumbs/Brand Book 31.jpg" />
		<img src="/images/playbook/Brand Book 32.jpg" alt="Image 32" longdesc="/images/playbook/thumbs/Brand Book 32.jpg"/>
		<img src="/images/playbook/Brand Book 33.jpg" alt="Image 33" longdesc="/images/playbook/thumbs/Brand Book 33.jpg"/>
		<img src="/images/playbook/Brand Book 34.jpg" alt="Image 34" longdesc="/images/playbook/thumbs/Brand Book 34.jpg"/>
		<img src="/images/playbook/Brand Book 35.jpg" alt="Image 35" longdesc="/images/playbook/thumbs/Brand Book 35.jpg"/>
		<img src="/images/playbook/Brand Book 36.jpg" alt="Image 36" longdesc="/images/playbook/thumbs/Brand Book 36.jpg"/>
		<img src="/images/playbook/Brand Book 37.jpg" alt="Image 37" longdesc="/images/playbook/thumbs/Brand Book 37.jpg"/>

		<div class="tf_pattern"></div>
	</div>
	<div id="tf_content_wrapper" class="tf_content_wrapper">
		<div class="tf_content" id="content1" style="display:block;">
			<!-- <h2>Dreamer</h2>
			<p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p> -->
		</div>
		<div class="tf_content" id="content2">
			<!-- <h2>Crusader</h2>
			<p>Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia.</p> -->
		</div>
		<div class="tf_content" id="content3">
			<!-- <h2>Adventurer</h2>
			<p>It is a paradisematic country, in which roasted parts of sentences fly into your mouth.</p> -->
		</div>
		<div class="tf_content" id="content4">
			<!-- <h2>Risk Taker</h2>
			<p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p> -->
		</div>
		<div class="tf_content" id="content5">
			<!-- <h2>Visioneer</h2>
			<p>Pityful a rethoric question ran over her cheek, then she continued her way. On her way she met a copy.</p> -->
		</div>
		<div class="tf_content" id="content6">
			<!-- <h2>Magician</h2>
			<p>And if she hasnâ€™t been rewritten, then they are still using her. Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p> -->
		</div>
	</div>

	<div id="tf_thumbs" class="tf_thumbs">
		<span id="tf_zoom" class="tf_zoom"></span>
		<img src="/images/playbook/thumbs/Brand Book 1.jpg" alt="Thumb1"/>
	</div>

	<div id="tf_next" class="tf_next"></div>
	<div id="tf_prev" class="tf_prev"></div>


	<div class="description">
		<span>Use keys &uarr; and &darr; or the wheel of the mouse to navigate.</span>
	</div>
	<!-- The JavaScript -->
	<!-- <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script> -->
	<script type="text/javascript" src="/scripts/jquery.flip.js"></script>
	<script type="text/javascript" src="/scripts/jquery-mousewheel-3.1.13/jquery.mousewheel.min.js"></script>
	<script type="text/javascript">
		/*
		the images preload plugin
		*/
		(function($) {
			$.fn.preload = function(options) {
				var opts 	= $.extend({}, $.fn.preload.defaults, options);
				o			= $.meta ? $.extend({}, opts, this.data()) : opts;
				var c		= this.length,
					l		= 0;
				return this.each(function() {
					var $i	= $(this);
					$('<img/>').load(function(i){
						++l;
						if(l == c) o.onComplete();
					}).attr('src',$i.attr('src'));
				});
			};
			$.fn.preload.defaults = {
				onComplete	: function(){return false;}
			};
		})(jQuery);
	</script>
	<script type="text/javascript">
		//$(function() {
		$(document).ready(function(){
			var $tf_bg				= $('#tf_bg'),
				$tf_bg_images		= $tf_bg.find('img'),
				$tf_bg_img			= $tf_bg_images.eq(0),
				$tf_thumbs			= $('#tf_thumbs'),
				total				= $tf_bg_images.length,
				current				= 0,
				$tf_content_wrapper	= $('#tf_content_wrapper'),
				$tf_next			= $('#tf_next'),
				$tf_prev			= $('#tf_prev'),
				$tf_loading			= $('#tf_loading');

			//preload the images
			$tf_bg_images.preload({
				onComplete	: function(){
					$tf_loading.hide();
					init();
				}
			});

			//shows the first image and initializes events
			function init(){
				//get dimentions for the image, based on the windows size
				var dim	= getImageDim($tf_bg_img);
				//set the returned values and show the image
				$tf_bg_img.css({
					width	: dim.width,
					height	: dim.height,
					left	: dim.left,
					top		: dim.top
				}).fadeIn();

				//resizing the window resizes the $tf_bg_img
			$(window).bind('resize',function(){
				var dim	= getImageDim($tf_bg_img);
				$tf_bg_img.css({
					width	: dim.width,
					height	: dim.height,
					left	: dim.left,
					top		: dim.top
				});
			});

				//expand and fit the image to the screen
				$('body').on('click', '#tf_zoom',
					function(){
					if($tf_bg_img.is(':animated'))
						return false;

						var $this	= $(this);
						if($this.hasClass('tf_zoom')){
							resize($tf_bg_img);
							$this.addClass('tf_fullscreen')
								 .removeClass('tf_zoom');
						}
						else{
							var dim	= getImageDim($tf_bg_img);
							$tf_bg_img.animate({
								width	: dim.width,
								height	: dim.height,
								top		: dim.top,
								left	: dim.left
							},350);
							$this.addClass('tf_zoom')
								 .removeClass('tf_fullscreen');
						}
					}
				);

				//click the arrow down, scrolls down
				$tf_next.bind('click',function(){

					if($tf_bg_img.is(':animated'))
						return false;
						scroll('tb');
				});

				//click the arrow up, scrolls up
				$tf_prev.bind('click',function(){
					if($tf_bg_img.is(':animated'))
					return false;
					scroll('bt');
				});

				//mousewheel events - down / up button trigger the scroll down / up
				$(document).mousewheel(function(e, delta) {
					if($tf_bg_img.is(':animated'))
						return false;

					if(delta > 0)
						scroll('bt');
					else
						scroll('tb');
					return false;
				});

				//key events - down / up button trigger the scroll down / up
				$(document).keydown(function(e){
					if($tf_bg_img.is(':animated'))
						return false;

					switch(e.which){
						case 38:
							scroll('bt');
							break;

						case 40:
							scroll('tb');
							break;
					}
				});
			}

			//show next / prev image
			function scroll(dir){

				//if dir is "tb" (top -> bottom) increment current,
				//else if "bt" decrement it
				current	= (dir == 'tb')?current + 1:current - 1;

				//we want a circular slideshow,
				//so we need to check the limits of current
				if(current == total) current = 0;
				else if(current < 0) current = total - 1;

				//flip the thumb
				$tf_thumbs.flip({
					direction	: dir,
					speed		: 400,
					onBefore	: function(){
						//the new thumb is set here
						var content	= '<span id="tf_zoom" class="tf_zoom"></span>';
						content		+='<img src="' + $tf_bg_images.eq(current).attr('longdesc') + '" alt="Thumb' + (current+1) + '"/>';
						$tf_thumbs.html(content);
				}
				});

				//we get the next image
				var $tf_bg_img_next	= $tf_bg_images.eq(current),
					//its dimentions
					dim				= getImageDim($tf_bg_img_next),
					//the top should be one that makes the image out of the viewport
					//the image should be positioned up or down depending on the direction
						top	= (dir == 'tb')?$(window).height() + 'px':-parseFloat(dim.height,10) + 'px';

				//set the returned values and show the next image
					$tf_bg_img_next.css({
						width	: dim.width,
						height	: dim.height,
						left	: dim.left,
						top		: top
					}).show();

				//now slide it to the viewport
					$tf_bg_img_next.stop().animate({
						top 	: dim.top
					},1000);

				//we want the old image to slide in the same direction, out of the viewport
					var slideTo	= (dir == 'tb')?-$tf_bg_img.height() + 'px':$(window).height() + 'px';
					$tf_bg_img.stop().animate({
						top 	: slideTo
					},1000,function(){
					//hide it
						$(this).hide();
					//the $tf_bg_img is now the shown image
						$tf_bg_img	= $tf_bg_img_next;
					//show the description for the new image
						$tf_content_wrapper.children()
										   .eq(current)
									       .show();
			});
				//hide the current description
					$tf_content_wrapper.children(':visible')
									   .hide()

			}

			//animate the image to fit in the viewport
			function resize($img){
				var w_w	= $(window).width(),
					w_h	= $(window).height(),
					i_w	= $img.width(),
					i_h	= $img.height(),
					r_i	= i_h / i_w,
					new_w,new_h;

				if(i_w > i_h){
					new_w	= w_w;
					new_h	= w_w * r_i;

					if(new_h > w_h){
						new_h	= w_h;
						new_w	= w_h / r_i;
					}
				}
				else{
					new_h	= w_w * r_i;
					new_w	= w_w;
				}

				$img.animate({
					width	: new_w + 'px',
					height	: new_h + 'px',
					top		: '0px',
					left	: '0px'
				},350);
			}

			//get dimentions of the image,
			//in order to make it full size and centered
			function getImageDim($img){
				var w_w	= window.innerWidth, //$(window).width(),
					w_h	= window.innerHeight, //$(window).height(),
					r_w	= w_h / w_w,
					i_w	= $img.width(),
					i_h	= $img.height(),
					r_i	= i_h / i_w,
					new_w,new_h,
					new_left,new_top;

				if(r_w > r_i){
					new_h	= w_h;
					new_w	= w_h / r_i;
				}
				else{
					new_h	= w_w * r_i;
					new_w	= w_w;
				}


				return {
					width	: new_w + 'px',
					height	: new_h + 'px',
					left	: (w_w - new_w) / 2 + 'px',
					top		: (w_h - new_h) / 2 + 'px'
				};
			}

			setInterval(function(){
				if($tf_bg_img.is(':animated'))
					return false;
				scroll('tb');
			}, 10000);
		});



	</script>
</template>
